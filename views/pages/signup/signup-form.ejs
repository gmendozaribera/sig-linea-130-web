<!DOCTYPE html>
<html>

<head>
  <% include ../../partials/header.ejs %>
</head>

<body>

  <% include ../../partials/nav.ejs %>


  <div class="container">
    <div class="row">
      <div class="col-md-8">
        <div class="card" id="signup-card">
          <div id="signup-form" class="card-body">
            <h5 class="card-title">Crear cuenta nueva</h5>
            <hr>
            <form id="frm-signup" action="signup" method="POST">
              <label for="username">Nombre de Usuario:</label>
              <input type="text" name="username" id="username" class="form-control" placeholder="ej: alguien99" required>
              <br>
              <label for="txt-email">Correo Electrónico:</label>
              <input type="email" name="email" id="txt-email" class="form-control" placeholder="ej: alguien@email.com" required>
              <br>
              <label for="password">Contraseña:</label>
              <input type="password" name="password" id="txt-password" class="form-control" placeholder="●●●●●●●●●●" required>
              <br>
              <label for="txt-password-confirm">Confirmación de contraseña:</label>
              <input type="password" name="password-confirm" id="txt-password-confirm" class="form-control"
                placeholder="●●●●●●●●●●" required>
              <br>
              <input class="btn btn-success" type="submit" value="Crear cuenta nueva">
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>


  <% include ../../partials/footer.ejs %>


  <script>

    function formEsValido() {
      var re = /\S+@\S+\.\S+/;
      if (!re.test($('#txt-email').val()))
        return 'Email no válido';
      if ($('#txt-password').val() !== $('#txt-password-confirm').val())
        return 'Las contraseñas deben ser iguales'
      return 'ok';
    }

    // manejar form submit
    $('#frm-signup').submit((ev) => {
      let result = formEsValido();
      if (result !== 'ok') {
        ev.preventDefault();
        alert('Error!\n' + result);
      }
    });

  </script>

</body>

</html>